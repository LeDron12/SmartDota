2025-05-14 14:44:21,117 - root - INFO - Starting time-based CV experiment with config: ../configs/hero_ohe_3.78c_hero-stats_player-stats.yaml
2025-05-14 14:44:21,117 - root - INFO - Number of windows: 3, Window size: 6 hours
2025-05-14 14:44:21,121 - src.experiments.src.utils.config - INFO - Loaded configuration from ../configs/hero_ohe_3.78c_hero-stats_player-stats.yaml
2025-05-14 14:44:21,121 - src.experiments.src.utils.config - INFO - Transformer 'StarzDatasetConverter' is enabled
2025-05-14 14:44:21,121 - src.experiments.src.utils.config - INFO - Transformer 'HeroFeaturesTransformer' is disabled
2025-05-14 14:44:21,121 - src.experiments.src.utils.config - INFO - Transformer 'HeroStatsTransformer' is enabled
2025-05-14 14:44:21,121 - src.experiments.src.utils.config - INFO - Transformer 'PlayerStatsTransformer' is enabled
2025-05-14 14:44:21,124 - src.experiments.src.core.dataset_factory - INFO - Loading dataset of type: starz_public_matches
2025-05-14 14:44:21,124 - src.experiments.src.core.dataset_factory - INFO - Loading starz public matches from: /Users/ankamenskiy/SmartDota/src/data_new/fetched_datasets/stratz_matches.json
2025-05-14 14:44:22,480 - src.experiments.src.core.dataset_factory - INFO - Removed 103 matches due to missing or empty data.
2025-05-14 14:44:36,785 - src.experiments.src.core.dataset_factory - INFO - Loaded 27176 matches
2025-05-14 14:44:36,785 - src.experiments.src.core.dataset_factory - INFO - No role count: {'matches': 1371, 'players': 13710}
2025-05-14 14:44:36,861 - root - INFO - Train DF dtypes: match_id                  int64
radiant_win                bool
start_time                int64
end_time                  int64
actualRank                int64
rank                      int64
radiant_team             object
dire_team                object
radiant_1                object
radiant_2                object
radiant_3                object
radiant_4                object
radiant_5                object
dire_1                   object
dire_2                   object
dire_3                   object
dire_4                   object
dire_5                   object
pd_start_time    datetime64[ns]
dtype: object
2025-05-14 14:44:36,861 - root - INFO - Val DF dtypes: match_id                  int64
radiant_win                bool
start_time                int64
end_time                  int64
actualRank                int64
rank                      int64
radiant_team             object
dire_team                object
radiant_1                object
radiant_2                object
radiant_3                object
radiant_4                object
radiant_5                object
dire_1                   object
dire_2                   object
dire_3                   object
dire_4                   object
dire_5                   object
pd_start_time    datetime64[ns]
dtype: object
2025-05-14 14:44:37,007 - __main__ - INFO - 
Window 1/3:
2025-05-14 14:44:37,007 - __main__ - INFO - Train period: 2025-04-04 21:00:11 to 2025-05-04 14:58:44
2025-05-14 14:44:37,007 - __main__ - INFO - Validation period: 2025-05-04 14:58:55 to 2025-05-04 20:58:49
2025-05-14 14:44:37,007 - __main__ - INFO - Train size: 26829, Validation size: 347
2025-05-14 14:44:37,019 - root - INFO - Train DF dtypes: match_id                  int64
radiant_win                bool
start_time                int64
end_time                  int64
actualRank                int64
rank                      int64
radiant_team             object
dire_team                object
radiant_1                object
radiant_2                object
radiant_3                object
radiant_4                object
radiant_5                object
dire_1                   object
dire_2                   object
dire_3                   object
dire_4                   object
dire_5                   object
pd_start_time    datetime64[ns]
dtype: object
2025-05-14 14:44:37,020 - root - INFO - Val DF dtypes: match_id                  int64
radiant_win                bool
start_time                int64
end_time                  int64
actualRank                int64
rank                      int64
radiant_team             object
dire_team                object
radiant_1                object
radiant_2                object
radiant_3                object
radiant_4                object
radiant_5                object
dire_1                   object
dire_2                   object
dire_3                   object
dire_4                   object
dire_5                   object
pd_start_time    datetime64[ns]
dtype: object
2025-05-14 14:44:37,164 - __main__ - INFO - 
Window 2/3:
2025-05-14 14:44:37,165 - __main__ - INFO - Train period: 2025-04-04 21:00:11 to 2025-05-04 08:58:34
2025-05-14 14:44:37,165 - __main__ - INFO - Validation period: 2025-05-04 09:01:45 to 2025-05-04 14:58:44
2025-05-14 14:44:37,165 - __main__ - INFO - Train size: 26464, Validation size: 365
2025-05-14 14:44:37,176 - root - INFO - Train DF dtypes: match_id                  int64
radiant_win                bool
start_time                int64
end_time                  int64
actualRank                int64
rank                      int64
radiant_team             object
dire_team                object
radiant_1                object
radiant_2                object
radiant_3                object
radiant_4                object
radiant_5                object
dire_1                   object
dire_2                   object
dire_3                   object
dire_4                   object
dire_5                   object
pd_start_time    datetime64[ns]
dtype: object
2025-05-14 14:44:37,177 - root - INFO - Val DF dtypes: match_id                  int64
radiant_win                bool
start_time                int64
end_time                  int64
actualRank                int64
rank                      int64
radiant_team             object
dire_team                object
radiant_1                object
radiant_2                object
radiant_3                object
radiant_4                object
radiant_5                object
dire_1                   object
dire_2                   object
dire_3                   object
dire_4                   object
dire_5                   object
pd_start_time    datetime64[ns]
dtype: object
2025-05-14 14:44:37,322 - __main__ - INFO - 
Window 3/3:
2025-05-14 14:44:37,323 - __main__ - INFO - Train period: 2025-04-04 21:00:11 to 2025-05-04 02:56:44
2025-05-14 14:44:37,323 - __main__ - INFO - Validation period: 2025-05-04 02:59:54 to 2025-05-04 08:58:34
2025-05-14 14:44:37,323 - __main__ - INFO - Train size: 26241, Validation size: 223
2025-05-14 14:44:37,325 - src.experiments.src.core.factory - INFO - Registered transformer: DatasetConverter
2025-05-14 14:44:37,325 - src.experiments.src.core.factory - INFO - Registered transformer: StarzDatasetConverter
2025-05-14 14:44:37,325 - src.experiments.src.core.factory - INFO - Registered transformer: HeroFeaturesTransformer
2025-05-14 14:44:37,325 - src.experiments.src.core.factory - INFO - Registered transformer: HeroStatsTransformer
2025-05-14 14:44:37,325 - src.experiments.src.core.factory - INFO - Registered transformer: PlayerStatsTransformer
2025-05-14 14:44:37,325 - src.experiments.src.core.factory - INFO - Registered transformer: PlayerHeroStatsTransformer
2025-05-14 14:44:37,325 - src.experiments.src.core.factory - INFO - Registered transformer: PlayerRatingsTransformer
2025-05-14 14:44:37,325 - src.experiments.src.core.factory - INFO - Added transformer to pipeline: StarzDatasetConverter
2025-05-14 14:44:37,325 - src.experiments.src.transformers.hero_features - INFO - Loading hero mapping...
2025-05-14 14:44:37,325 - src.experiments.src.transformers.hero_features - INFO - Loading heroes from: /Users/ankamenskiy/SmartDota/data/heroes.json
2025-05-14 14:44:37,326 - src.experiments.src.transformers.hero_features - INFO - Loaded 126 heroes
2025-05-14 14:44:37,326 - src.experiments.src.transformers.hero_features - INFO - Sample hero: 1 -> Anti-Mage (seq_id: 0)
2025-05-14 14:44:37,327 - src.experiments.src.transformers.hero_features - INFO - Sample hero: 2 -> Axe (seq_id: 1)
2025-05-14 14:44:37,327 - src.experiments.src.transformers.hero_features - INFO - Sample hero: 3 -> Bane (seq_id: 2)
2025-05-14 14:44:37,327 - src.experiments.src.transformers.hero_features - INFO - Sample hero: 4 -> Bloodseeker (seq_id: 3)
2025-05-14 14:44:37,327 - src.experiments.src.transformers.hero_features - INFO - Sample hero: 5 -> Crystal Maiden (seq_id: 4)
2025-05-14 14:44:37,327 - src.experiments.src.transformers.hero_features - INFO - Initialized 252 feature names
2025-05-14 14:44:37,327 - src.experiments.src.transformers.hero_stats_transformer - INFO - Excluding features: set()
2025-05-14 14:44:37,327 - src.experiments.src.core.factory - INFO - Added transformer to pipeline: HeroStatsTransformer
2025-05-14 14:44:37,327 - src.experiments.src.core.factory - INFO - Added transformer to pipeline: PlayerStatsTransformer
2025-05-14 14:44:37,327 - root - INFO - Pipeline directory: /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline
2025-05-14 14:44:37,327 - root - INFO - 
Processing window 1/3
2025-05-14 14:44:37,329 - src.experiments.src.core.factory - INFO - Fitting pipeline on DataFrame with shape: (26829, 19)
2025-05-14 14:44:37,329 - src.experiments.src.core.factory - INFO - Fitting transformer: StarzDatasetConverter
2025-05-14 14:44:37,334 - src.experiments.src.core.factory - INFO - Fitting transformer: HeroStatsTransformer
2025-05-14 14:44:37,338 - src.experiments.src.transformers.hero_stats_transformer - INFO - Loading heroes from: /Users/ankamenskiy/SmartDota/data/hero_stats.json
2025-05-14 14:44:37,340 - src.experiments.src.transformers.hero_stats_transformer - INFO - Loaded hero data from /Users/ankamenskiy/SmartDota/data/hero_stats.json
2025-05-14 14:44:37,340 - src.experiments.src.transformers.hero_stats_transformer - INFO - Number of heroes: 126
2025-05-14 14:44:37,340 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero statistics from match data...
2025-05-14 14:44:38,463 - src.experiments.src.transformers.hero_stats_transformer - INFO - Finished calculating hero statistics
2025-05-14 14:44:38,469 - src.experiments.src.core.factory - INFO - Fitting transformer: PlayerStatsTransformer
2025-05-14 14:44:38,473 - src.experiments.src.transformers.player_stats_transformer - INFO - Calculating player statistics from match data...
2025-05-14 14:44:41,520 - src.experiments.src.transformers.player_stats_transformer - INFO - Finished calculating player statistics
2025-05-14 14:44:41,525 - src.experiments.src.core.factory - INFO - Pipeline fitting completed
2025-05-14 14:44:41,526 - src.experiments.src.core.base - INFO - Saving transformer StarzDatasetConverter state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/StarzDatasetConverter.pkl
2025-05-14 14:44:41,527 - src.experiments.src.core.base - INFO - Successfully saved transformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/StarzDatasetConverter.pkl
2025-05-14 14:44:41,527 - src.experiments.src.core.factory - INFO - Saved transformer StarzDatasetConverter to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/StarzDatasetConverter.pkl
2025-05-14 14:44:41,527 - src.experiments.src.core.base - INFO - Saving transformer HeroStatsTransformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/HeroStatsTransformer.pkl
2025-05-14 14:44:41,538 - src.experiments.src.core.base - INFO - Successfully saved transformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/HeroStatsTransformer.pkl
2025-05-14 14:44:41,538 - src.experiments.src.core.factory - INFO - Saved transformer HeroStatsTransformer to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/HeroStatsTransformer.pkl
2025-05-14 14:44:41,538 - src.experiments.src.core.base - INFO - Saving transformer PlayerStatsTransformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/PlayerStatsTransformer.pkl
2025-05-14 14:44:41,920 - src.experiments.src.core.base - INFO - Successfully saved transformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/PlayerStatsTransformer.pkl
2025-05-14 14:44:41,936 - src.experiments.src.core.factory - INFO - Saved transformer PlayerStatsTransformer to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/PlayerStatsTransformer.pkl
2025-05-14 14:44:41,936 - src.experiments.src.core.factory - INFO - Transforming DataFrame with shape: (26829, 19)
2025-05-14 14:44:41,936 - src.experiments.src.core.factory - INFO - Applying transformer: StarzDatasetConverter
2025-05-14 14:44:41,940 - src.experiments.src.transformers.starz_dataset_converter - INFO - Columns: match_id, radiant_win, start_time, end_time, actualRank, rank, radiant_team, dire_team, radiant_1, radiant_2, radiant_3, radiant_4, radiant_5, dire_1, dire_2, dire_3, dire_4, dire_5, pd_start_time
2025-05-14 14:44:41,944 - src.experiments.src.core.factory - INFO - Result df shape: (26829, 1)
2025-05-14 14:44:41,944 - src.experiments.src.core.factory - INFO - Added features by StarzDatasetConverter: Index(['actualRank'], dtype='object')
2025-05-14 14:44:41,946 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
   actualRank
0          62
1          62
2          71
3          72
4          54
2025-05-14 14:44:41,946 - src.experiments.src.core.factory - INFO - Applying transformer: HeroStatsTransformer
2025-05-14 14:44:41,950 - src.experiments.src.transformers.hero_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:44:41,950 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero winrates within team...
2025-05-14 14:44:42,421 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero with hero winrates within team...
2025-05-14 14:44:43,321 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero versus hero winrates...
2025-05-14 14:44:43,811 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero pickrates within team...
2025-05-14 14:44:44,379 - src.experiments.src.transformers.hero_stats_transformer - INFO - Added 7 hero statistics features
2025-05-14 14:44:44,382 - src.experiments.src.core.factory - INFO - Result df shape: (26829, 7)
2025-05-14 14:44:44,383 - src.experiments.src.core.factory - INFO - Added features by HeroStatsTransformer: Index(['radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate',
       'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate',
       'dire_avg_hero_pickrate', 'dire_avg_hero_winrate',
       'dire_avg_hero_synergy'],
      dtype='object')
2025-05-14 14:44:44,386 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
   radiant_avg_vs_enemy_winrate  radiant_avg_hero_pickrate  radiant_avg_hero_synergy  radiant_avg_hero_winrate  dire_avg_hero_pickrate  dire_avg_hero_winrate  dire_avg_hero_synergy
0                      0.498215                   0.092803                  0.501433                  0.510881                0.090917               0.516101               0.535316
1                      0.503844                   0.105580                  0.506832                  0.493648                0.147922               0.504795               0.500733
2                      0.497494                   0.100809                  0.466192                  0.482381                0.114682               0.492634               0.494305
3                      0.524139                   0.108099                  0.536511                  0.511411                0.072727               0.506995               0.492335
4                      0.501296                   0.136069                  0.507958                  0.503387                0.091692               0.497403               0.488792
2025-05-14 14:44:44,386 - src.experiments.src.core.factory - INFO - Applying transformer: PlayerStatsTransformer
2025-05-14 14:44:44,390 - src.experiments.src.transformers.player_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:45:39,104 - src.experiments.src.transformers.player_stats_transformer - INFO - Added 28 player statistics features
2025-05-14 14:45:39,113 - src.experiments.src.core.factory - INFO - Result df shape: (26829, 28)
2025-05-14 14:45:39,114 - src.experiments.src.core.factory - INFO - Added features by PlayerStatsTransformer: Index(['radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists',
       'radiant_avg_last_hits', 'radiant_avg_denies',
       'radiant_avg_hero_damage', 'radiant_avg_hero_healing',
       'radiant_avg_role_match', 'radiant_avg_behavior',
       'radiant_avg_account_level', 'radiant_avg_dota_plus',
       'radiant_avg_smurf_flag', 'radiant_avg_time_since_last',
       'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths',
       'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies',
       'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match',
       'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus',
       'dire_avg_smurf_flag', 'dire_avg_time_since_last',
       'dire_avg_matches_played'],
      dtype='object')
2025-05-14 14:45:39,127 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
   radiant_avg_kills  radiant_avg_deaths  radiant_avg_assists  radiant_avg_last_hits  radiant_avg_denies  radiant_avg_hero_damage  radiant_avg_hero_healing  ...  dire_avg_role_match  dire_avg_behavior  dire_avg_account_level  dire_avg_dota_plus  dire_avg_smurf_flag  dire_avg_time_since_last  dire_avg_matches_played
0           8.822222            8.716667            15.988889             225.463889            8.097222             30319.183333               2551.772222  ...             0.816667           0.000000                    80.0                 0.4                  0.0                -1275954.2                      6.4
1           8.766667            6.200000            14.766667             154.733333           10.166667             21074.366667                657.533333  ...             0.700000           0.000000                    47.6                 0.2                  0.0                 -342750.0                      1.4
2          11.600000           11.000000            23.000000             308.600000            5.600000             37513.000000                  0.000000  ...             0.844444           0.010526                    85.6                 0.0                  0.0                -2433459.2                     10.4
3           7.757143            8.723810            16.047619             262.597619            7.680952             30677.454762               1900.583333  ...             0.704365           0.000000                   165.8                 1.0                  0.0                -2246007.6                     13.2
4          10.800000            9.400000            22.900000             189.500000            5.500000             36460.100000                728.200000  ...             0.800000           0.000000                    41.8                 0.6                  0.0                 -705874.2                      1.6

[5 rows x 28 columns]
2025-05-14 14:45:39,133 - src.experiments.src.core.factory - INFO - Final DataFrame columns: ['actualRank', 'radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate', 'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate', 'dire_avg_hero_pickrate', 'dire_avg_hero_winrate', 'dire_avg_hero_synergy', 'radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists', 'radiant_avg_last_hits', 'radiant_avg_denies', 'radiant_avg_hero_damage', 'radiant_avg_hero_healing', 'radiant_avg_role_match', 'radiant_avg_behavior', 'radiant_avg_account_level', 'radiant_avg_dota_plus', 'radiant_avg_smurf_flag', 'radiant_avg_time_since_last', 'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths', 'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies', 'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match', 'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus', 'dire_avg_smurf_flag', 'dire_avg_time_since_last', 'dire_avg_matches_played']
2025-05-14 14:45:39,134 - src.experiments.src.core.factory - INFO - Transforming DataFrame with shape: (347, 19)
2025-05-14 14:45:39,134 - src.experiments.src.core.factory - INFO - Applying transformer: StarzDatasetConverter
2025-05-14 14:45:39,135 - src.experiments.src.transformers.starz_dataset_converter - INFO - Columns: match_id, radiant_win, start_time, end_time, actualRank, rank, radiant_team, dire_team, radiant_1, radiant_2, radiant_3, radiant_4, radiant_5, dire_1, dire_2, dire_3, dire_4, dire_5, pd_start_time
2025-05-14 14:45:39,135 - src.experiments.src.core.factory - INFO - Result df shape: (347, 1)
2025-05-14 14:45:39,135 - src.experiments.src.core.factory - INFO - Added features by StarzDatasetConverter: Index(['actualRank'], dtype='object')
2025-05-14 14:45:39,137 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
       actualRank
26829          62
26830          54
26831          50
26832          54
26833          63
2025-05-14 14:45:39,137 - src.experiments.src.core.factory - INFO - Applying transformer: HeroStatsTransformer
2025-05-14 14:45:39,137 - src.experiments.src.transformers.hero_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:45:39,137 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero winrates within team...
2025-05-14 14:45:39,148 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero with hero winrates within team...
2025-05-14 14:45:39,176 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero versus hero winrates...
2025-05-14 14:45:39,182 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero pickrates within team...
2025-05-14 14:45:39,189 - src.experiments.src.transformers.hero_stats_transformer - INFO - Added 7 hero statistics features
2025-05-14 14:45:39,190 - src.experiments.src.core.factory - INFO - Result df shape: (347, 7)
2025-05-14 14:45:39,190 - src.experiments.src.core.factory - INFO - Added features by HeroStatsTransformer: Index(['radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate',
       'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate',
       'dire_avg_hero_pickrate', 'dire_avg_hero_winrate',
       'dire_avg_hero_synergy'],
      dtype='object')
2025-05-14 14:45:39,193 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
       radiant_avg_vs_enemy_winrate  radiant_avg_hero_pickrate  radiant_avg_hero_synergy  radiant_avg_hero_winrate  dire_avg_hero_pickrate  dire_avg_hero_winrate  dire_avg_hero_synergy
26829                      0.469782                   0.115241                  0.471820                  0.483736                0.173909               0.509900               0.534879
26830                      0.471676                   0.113966                  0.495955                  0.494312                0.134854               0.517211               0.516895
26831                      0.498541                   0.124954                  0.503682                  0.497327                0.092624               0.495804               0.479918
26832                      0.516859                   0.151120                  0.515555                  0.497350                0.117887               0.481983               0.460247
26833                      0.519181                   0.118282                  0.508712                  0.499325                0.105789               0.486599               0.504906
2025-05-14 14:45:39,193 - src.experiments.src.core.factory - INFO - Applying transformer: PlayerStatsTransformer
2025-05-14 14:45:39,193 - src.experiments.src.transformers.player_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:45:39,965 - src.experiments.src.transformers.player_stats_transformer - INFO - Added 28 player statistics features
2025-05-14 14:45:39,965 - src.experiments.src.core.factory - INFO - Result df shape: (347, 28)
2025-05-14 14:45:39,965 - src.experiments.src.core.factory - INFO - Added features by PlayerStatsTransformer: Index(['radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists',
       'radiant_avg_last_hits', 'radiant_avg_denies',
       'radiant_avg_hero_damage', 'radiant_avg_hero_healing',
       'radiant_avg_role_match', 'radiant_avg_behavior',
       'radiant_avg_account_level', 'radiant_avg_dota_plus',
       'radiant_avg_smurf_flag', 'radiant_avg_time_since_last',
       'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths',
       'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies',
       'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match',
       'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus',
       'dire_avg_smurf_flag', 'dire_avg_time_since_last',
       'dire_avg_matches_played'],
      dtype='object')
2025-05-14 14:45:39,976 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
       radiant_avg_kills  radiant_avg_deaths  radiant_avg_assists  radiant_avg_last_hits  radiant_avg_denies  radiant_avg_hero_damage  ...  dire_avg_behavior  dire_avg_account_level  dire_avg_dota_plus  dire_avg_smurf_flag  dire_avg_time_since_last  dire_avg_matches_played
26829           4.250000            4.812500            11.562500             174.750000            7.687500             18827.812500  ...                0.1              110.400000            0.200000                  0.0                  508793.0                 5.000000
26830           9.857143            8.952381            15.761905             159.000000            8.523810             31423.333333  ...                0.0               71.666667            0.333333                  0.0                 1551445.0                 1.666667
26831           0.000000            0.000000             0.000000               0.000000            0.000000                 0.000000  ...                0.0                0.000000            0.000000                  0.0                       0.0                 0.000000
26832           6.255921            7.263942            14.334034             237.417876            7.251337             29297.207410  ...                0.0              105.750000            0.250000                  0.0                 1281698.0                 4.750000
26833           0.000000            0.000000             0.000000               0.000000            0.000000                 0.000000  ...                0.0              108.500000            0.500000                  0.0                  576672.5                 7.500000

[5 rows x 28 columns]
2025-05-14 14:45:39,976 - src.experiments.src.core.factory - INFO - Final DataFrame columns: ['actualRank', 'radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate', 'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate', 'dire_avg_hero_pickrate', 'dire_avg_hero_winrate', 'dire_avg_hero_synergy', 'radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists', 'radiant_avg_last_hits', 'radiant_avg_denies', 'radiant_avg_hero_damage', 'radiant_avg_hero_healing', 'radiant_avg_role_match', 'radiant_avg_behavior', 'radiant_avg_account_level', 'radiant_avg_dota_plus', 'radiant_avg_smurf_flag', 'radiant_avg_time_since_last', 'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths', 'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies', 'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match', 'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus', 'dire_avg_smurf_flag', 'dire_avg_time_since_last', 'dire_avg_matches_played']
2025-05-14 14:45:39,977 - src.experiments.src.core.model_trainer - INFO - Using parameter grid search: False
2025-05-14 14:45:39,977 - src.experiments.src.core.model_trainer - INFO - Using SHAP: True
2025-05-14 14:45:39,977 - src.experiments.src.core.model_trainer - INFO - Using feature scaling: False
2025-05-14 14:45:39,980 - src.experiments.src.core.model_trainer - INFO - 
Training and evaluating models...
2025-05-14 14:45:39,980 - src.experiments.src.core.model_trainer - INFO - 
Training LogisticRegression...
2025-05-14 14:45:41,112 - src.experiments.src.core.model_trainer - INFO - 
LogisticRegression metrics:
2025-05-14 14:45:41,112 - src.experiments.src.core.model_trainer - INFO - auc_roc: 0.4931
2025-05-14 14:45:41,112 - src.experiments.src.core.model_trainer - INFO - f1: 0.5397
2025-05-14 14:45:41,112 - src.experiments.src.core.model_trainer - INFO - precision: 0.5484
2025-05-14 14:45:41,112 - src.experiments.src.core.model_trainer - INFO - recall: 0.5312
2025-05-14 14:45:41,112 - src.experiments.src.core.model_trainer - INFO - accuracy: 0.4986
2025-05-14 14:45:41,112 - src.experiments.src.core.model_trainer - INFO - log_loss: 0.9181
2025-05-14 14:45:41,112 - src.experiments.src.core.model_trainer - INFO - brier_score: 0.3081
2025-05-14 14:45:41,112 - src.experiments.src.core.model_trainer - INFO - 
New best model: LogisticRegression (AUC-ROC: 0.4931)
2025-05-14 14:45:41,112 - src.experiments.src.utils.feature_importance - INFO - 
Analyzing feature importance for LogisticRegression
2025-05-14 14:45:50,508 - src.experiments.src.utils.feature_importance - INFO - Saved feature importance statistics for LogisticRegression
2025-05-14 14:45:50,509 - src.experiments.src.core.model_trainer - INFO - 
Training RandomForest...
2025-05-14 14:46:01,699 - src.experiments.src.core.model_trainer - INFO - 
RandomForest metrics:
2025-05-14 14:46:01,699 - src.experiments.src.core.model_trainer - INFO - auc_roc: 0.5594
2025-05-14 14:46:01,699 - src.experiments.src.core.model_trainer - INFO - f1: 0.5978
2025-05-14 14:46:01,699 - src.experiments.src.core.model_trainer - INFO - precision: 0.6250
2025-05-14 14:46:01,699 - src.experiments.src.core.model_trainer - INFO - recall: 0.5729
2025-05-14 14:46:01,700 - src.experiments.src.core.model_trainer - INFO - accuracy: 0.5735
2025-05-14 14:46:01,700 - src.experiments.src.core.model_trainer - INFO - log_loss: 0.7654
2025-05-14 14:46:01,700 - src.experiments.src.core.model_trainer - INFO - brier_score: 0.2723
2025-05-14 14:46:01,700 - src.experiments.src.core.model_trainer - INFO - 
New best model: RandomForest (AUC-ROC: 0.5594)
2025-05-14 14:46:01,700 - src.experiments.src.utils.feature_importance - INFO - 
Analyzing feature importance for RandomForest
2025-05-14 14:46:46,073 - src.experiments.src.utils.feature_importance - INFO - Saved feature importance statistics for RandomForest
2025-05-14 14:46:46,073 - src.experiments.src.core.model_trainer - INFO - 
Training CatBoost...
2025-05-14 14:46:46,562 - src.experiments.src.core.model_trainer - INFO - 
CatBoost metrics:
2025-05-14 14:46:46,562 - src.experiments.src.core.model_trainer - INFO - auc_roc: 0.6054
2025-05-14 14:46:46,562 - src.experiments.src.core.model_trainer - INFO - f1: 0.6179
2025-05-14 14:46:46,562 - src.experiments.src.core.model_trainer - INFO - precision: 0.6441
2025-05-14 14:46:46,562 - src.experiments.src.core.model_trainer - INFO - recall: 0.5938
2025-05-14 14:46:46,562 - src.experiments.src.core.model_trainer - INFO - accuracy: 0.5937
2025-05-14 14:46:46,562 - src.experiments.src.core.model_trainer - INFO - log_loss: 0.6819
2025-05-14 14:46:46,562 - src.experiments.src.core.model_trainer - INFO - brier_score: 0.2444
2025-05-14 14:46:46,562 - src.experiments.src.core.model_trainer - INFO - 
New best model: CatBoost (AUC-ROC: 0.6054)
2025-05-14 14:46:46,562 - src.experiments.src.utils.feature_importance - INFO - 
Analyzing feature importance for CatBoost
2025-05-14 14:46:46,702 - src.experiments.src.utils.feature_importance - INFO - Saved feature importance statistics for CatBoost
2025-05-14 14:46:46,706 - src.experiments.src.utils.metrics - INFO - Saved model comparison to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_1/model_comparison.csv
2025-05-14 14:46:46,706 - src.experiments.src.utils.metrics - INFO - Saved model comparison to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_1/model_comparison.json
2025-05-14 14:46:46,706 - src.experiments.src.utils.metrics - INFO - 
Model comparison:
2025-05-14 14:46:46,710 - src.experiments.src.utils.metrics - INFO - 
                     auc_roc        f1  precision    recall  accuracy  log_loss  brier_score
LogisticRegression  0.493145  0.539683   0.548387  0.531250  0.498559  0.918136     0.308054
RandomForest        0.559425  0.597826   0.625000  0.572917  0.573487  0.765388     0.272286
CatBoost            0.605360  0.617886   0.644068  0.593750  0.593660  0.681921     0.244401
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - 
LogisticRegression optimal threshold analysis:
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - Optimal F1 threshold: 0.000
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - Metrics at optimal F1 threshold:
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.712
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - Precision: 0.553
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - Recall: 1.000
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.553
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.308
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - 
Optimal Accuracy threshold: 0.283
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - Metrics at optimal Accuracy threshold:
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.683
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - Precision: 0.572
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - Recall: 0.849
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.565
2025-05-14 14:46:47,140 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.308
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - 
RandomForest optimal threshold analysis:
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - Optimal F1 threshold: 0.000
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - Metrics at optimal F1 threshold:
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.712
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - Precision: 0.553
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - Recall: 1.000
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.553
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.272
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - 
Optimal Accuracy threshold: 0.475
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - Metrics at optimal Accuracy threshold:
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.611
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - Precision: 0.617
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - Recall: 0.604
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.573
2025-05-14 14:46:47,591 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.272
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - 
CatBoost optimal threshold analysis:
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - Optimal F1 threshold: 0.000
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - Metrics at optimal F1 threshold:
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.712
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - Precision: 0.553
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - Recall: 1.000
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.553
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.244
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - 
Optimal Accuracy threshold: 0.485
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - Metrics at optimal Accuracy threshold:
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.667
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - Precision: 0.626
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - Recall: 0.714
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.605
2025-05-14 14:46:48,020 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.244
2025-05-14 14:46:48,022 - src.experiments.src.core.model_trainer - INFO - Saved LogisticRegression model to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_1/checkpoints/window_1_logisticregression.joblib
2025-05-14 14:46:48,059 - src.experiments.src.core.model_trainer - INFO - Saved RandomForest model to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_1/checkpoints/window_1_randomforest.joblib
2025-05-14 14:46:48,062 - src.experiments.src.core.model_trainer - INFO - Saved CatBoost model to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_1/checkpoints/window_1_catboost.cbm
2025-05-14 14:46:48,062 - src.experiments.src.core.model_trainer - INFO - Saved best model (CatBoost) to production at /Users/ankamenskiy/SmartDota/models/catboost/window_1.cbm
2025-05-14 14:46:48,062 - root - INFO - 
Processing window 2/3
2025-05-14 14:46:48,064 - src.experiments.src.core.factory - INFO - Fitting pipeline on DataFrame with shape: (26464, 19)
2025-05-14 14:46:48,064 - src.experiments.src.core.factory - INFO - Fitting transformer: StarzDatasetConverter
2025-05-14 14:46:48,096 - src.experiments.src.core.factory - INFO - Fitting transformer: HeroStatsTransformer
2025-05-14 14:46:48,099 - src.experiments.src.transformers.hero_stats_transformer - INFO - Loading heroes from: /Users/ankamenskiy/SmartDota/data/hero_stats.json
2025-05-14 14:46:48,103 - src.experiments.src.transformers.hero_stats_transformer - INFO - Loaded hero data from /Users/ankamenskiy/SmartDota/data/hero_stats.json
2025-05-14 14:46:48,103 - src.experiments.src.transformers.hero_stats_transformer - INFO - Number of heroes: 126
2025-05-14 14:46:48,103 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero statistics from match data...
2025-05-14 14:46:49,209 - src.experiments.src.transformers.hero_stats_transformer - INFO - Finished calculating hero statistics
2025-05-14 14:46:49,214 - src.experiments.src.core.factory - INFO - Fitting transformer: PlayerStatsTransformer
2025-05-14 14:46:49,218 - src.experiments.src.transformers.player_stats_transformer - INFO - Calculating player statistics from match data...
2025-05-14 14:46:52,700 - src.experiments.src.transformers.player_stats_transformer - INFO - Finished calculating player statistics
2025-05-14 14:46:52,707 - src.experiments.src.core.factory - INFO - Pipeline fitting completed
2025-05-14 14:46:52,707 - src.experiments.src.core.base - INFO - Saving transformer StarzDatasetConverter state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/StarzDatasetConverter.pkl
2025-05-14 14:46:52,708 - src.experiments.src.core.base - INFO - Successfully saved transformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/StarzDatasetConverter.pkl
2025-05-14 14:46:52,708 - src.experiments.src.core.factory - INFO - Saved transformer StarzDatasetConverter to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/StarzDatasetConverter.pkl
2025-05-14 14:46:52,708 - src.experiments.src.core.base - INFO - Saving transformer HeroStatsTransformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/HeroStatsTransformer.pkl
2025-05-14 14:46:52,719 - src.experiments.src.core.base - INFO - Successfully saved transformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/HeroStatsTransformer.pkl
2025-05-14 14:46:52,719 - src.experiments.src.core.factory - INFO - Saved transformer HeroStatsTransformer to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/HeroStatsTransformer.pkl
2025-05-14 14:46:52,719 - src.experiments.src.core.base - INFO - Saving transformer PlayerStatsTransformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/PlayerStatsTransformer.pkl
2025-05-14 14:46:53,124 - src.experiments.src.core.base - INFO - Successfully saved transformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/PlayerStatsTransformer.pkl
2025-05-14 14:46:53,143 - src.experiments.src.core.factory - INFO - Saved transformer PlayerStatsTransformer to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/PlayerStatsTransformer.pkl
2025-05-14 14:46:53,143 - src.experiments.src.core.factory - INFO - Transforming DataFrame with shape: (26464, 19)
2025-05-14 14:46:53,143 - src.experiments.src.core.factory - INFO - Applying transformer: StarzDatasetConverter
2025-05-14 14:46:53,147 - src.experiments.src.transformers.starz_dataset_converter - INFO - Columns: match_id, radiant_win, start_time, end_time, actualRank, rank, radiant_team, dire_team, radiant_1, radiant_2, radiant_3, radiant_4, radiant_5, dire_1, dire_2, dire_3, dire_4, dire_5, pd_start_time
2025-05-14 14:46:53,150 - src.experiments.src.core.factory - INFO - Result df shape: (26464, 1)
2025-05-14 14:46:53,150 - src.experiments.src.core.factory - INFO - Added features by StarzDatasetConverter: Index(['actualRank'], dtype='object')
2025-05-14 14:46:53,152 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
   actualRank
0          62
1          62
2          71
3          72
4          54
2025-05-14 14:46:53,152 - src.experiments.src.core.factory - INFO - Applying transformer: HeroStatsTransformer
2025-05-14 14:46:53,155 - src.experiments.src.transformers.hero_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:46:53,155 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero winrates within team...
2025-05-14 14:46:53,623 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero with hero winrates within team...
2025-05-14 14:46:54,598 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero versus hero winrates...
2025-05-14 14:46:55,077 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero pickrates within team...
2025-05-14 14:46:55,622 - src.experiments.src.transformers.hero_stats_transformer - INFO - Added 7 hero statistics features
2025-05-14 14:46:55,626 - src.experiments.src.core.factory - INFO - Result df shape: (26464, 7)
2025-05-14 14:46:55,627 - src.experiments.src.core.factory - INFO - Added features by HeroStatsTransformer: Index(['radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate',
       'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate',
       'dire_avg_hero_pickrate', 'dire_avg_hero_winrate',
       'dire_avg_hero_synergy'],
      dtype='object')
2025-05-14 14:46:55,630 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
   radiant_avg_vs_enemy_winrate  radiant_avg_hero_pickrate  radiant_avg_hero_synergy  radiant_avg_hero_winrate  dire_avg_hero_pickrate  dire_avg_hero_winrate  dire_avg_hero_synergy
0                      0.499981                   0.092851                  0.503810                  0.510353                0.090916               0.515125               0.533669
1                      0.503143                   0.105759                  0.505841                  0.493336                0.147914               0.504463               0.500985
2                      0.498747                   0.100748                  0.467993                  0.483039                0.114737               0.492248               0.491500
3                      0.525690                   0.108079                  0.535714                  0.511745                0.072733               0.507688               0.496878
4                      0.503325                   0.135920                  0.509425                  0.504265                0.091936               0.496270               0.485365
2025-05-14 14:46:55,630 - src.experiments.src.core.factory - INFO - Applying transformer: PlayerStatsTransformer
2025-05-14 14:46:55,634 - src.experiments.src.transformers.player_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:47:49,525 - src.experiments.src.transformers.player_stats_transformer - INFO - Added 28 player statistics features
2025-05-14 14:47:49,532 - src.experiments.src.core.factory - INFO - Result df shape: (26464, 28)
2025-05-14 14:47:49,533 - src.experiments.src.core.factory - INFO - Added features by PlayerStatsTransformer: Index(['radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists',
       'radiant_avg_last_hits', 'radiant_avg_denies',
       'radiant_avg_hero_damage', 'radiant_avg_hero_healing',
       'radiant_avg_role_match', 'radiant_avg_behavior',
       'radiant_avg_account_level', 'radiant_avg_dota_plus',
       'radiant_avg_smurf_flag', 'radiant_avg_time_since_last',
       'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths',
       'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies',
       'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match',
       'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus',
       'dire_avg_smurf_flag', 'dire_avg_time_since_last',
       'dire_avg_matches_played'],
      dtype='object')
2025-05-14 14:47:49,545 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
   radiant_avg_kills  radiant_avg_deaths  radiant_avg_assists  radiant_avg_last_hits  radiant_avg_denies  radiant_avg_hero_damage  radiant_avg_hero_healing  ...  dire_avg_role_match  dire_avg_behavior  dire_avg_account_level  dire_avg_dota_plus  dire_avg_smurf_flag  dire_avg_time_since_last  dire_avg_matches_played
0           8.822222            8.716667            15.988889             225.463889            8.097222             30319.183333               2551.772222  ...             0.810606           0.000000                    80.0                 0.4                  0.0                -1255034.2                      6.0
1           8.766667            6.200000            14.766667             154.733333           10.166667             21074.366667                657.533333  ...             0.700000           0.000000                    47.6                 0.2                  0.0                 -342750.0                      1.4
2          11.600000           11.000000            23.000000             308.600000            5.600000             37513.000000                  0.000000  ...             0.844444           0.010526                    85.6                 0.0                  0.0                -2433459.2                     10.4
3           7.757143            8.723810            16.047619             262.597619            7.680952             30677.454762               1900.583333  ...             0.704365           0.000000                   165.8                 1.0                  0.0                -2246007.6                     13.2
4          10.800000            9.400000            22.900000             189.500000            5.500000             36460.100000                728.200000  ...             0.800000           0.000000                    41.8                 0.6                  0.0                 -705874.2                      1.6

[5 rows x 28 columns]
2025-05-14 14:47:49,550 - src.experiments.src.core.factory - INFO - Final DataFrame columns: ['actualRank', 'radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate', 'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate', 'dire_avg_hero_pickrate', 'dire_avg_hero_winrate', 'dire_avg_hero_synergy', 'radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists', 'radiant_avg_last_hits', 'radiant_avg_denies', 'radiant_avg_hero_damage', 'radiant_avg_hero_healing', 'radiant_avg_role_match', 'radiant_avg_behavior', 'radiant_avg_account_level', 'radiant_avg_dota_plus', 'radiant_avg_smurf_flag', 'radiant_avg_time_since_last', 'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths', 'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies', 'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match', 'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus', 'dire_avg_smurf_flag', 'dire_avg_time_since_last', 'dire_avg_matches_played']
2025-05-14 14:47:49,553 - src.experiments.src.core.factory - INFO - Transforming DataFrame with shape: (365, 19)
2025-05-14 14:47:49,553 - src.experiments.src.core.factory - INFO - Applying transformer: StarzDatasetConverter
2025-05-14 14:47:49,553 - src.experiments.src.transformers.starz_dataset_converter - INFO - Columns: match_id, radiant_win, start_time, end_time, actualRank, rank, radiant_team, dire_team, radiant_1, radiant_2, radiant_3, radiant_4, radiant_5, dire_1, dire_2, dire_3, dire_4, dire_5, pd_start_time
2025-05-14 14:47:49,553 - src.experiments.src.core.factory - INFO - Result df shape: (365, 1)
2025-05-14 14:47:49,553 - src.experiments.src.core.factory - INFO - Added features by StarzDatasetConverter: Index(['actualRank'], dtype='object')
2025-05-14 14:47:49,555 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
       actualRank
26464          54
26465          53
26466          64
26467          61
26469          54
2025-05-14 14:47:49,555 - src.experiments.src.core.factory - INFO - Applying transformer: HeroStatsTransformer
2025-05-14 14:47:49,555 - src.experiments.src.transformers.hero_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:47:49,555 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero winrates within team...
2025-05-14 14:47:49,563 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero with hero winrates within team...
2025-05-14 14:47:49,577 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero versus hero winrates...
2025-05-14 14:47:49,585 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero pickrates within team...
2025-05-14 14:47:49,593 - src.experiments.src.transformers.hero_stats_transformer - INFO - Added 7 hero statistics features
2025-05-14 14:47:49,593 - src.experiments.src.core.factory - INFO - Result df shape: (365, 7)
2025-05-14 14:47:49,593 - src.experiments.src.core.factory - INFO - Added features by HeroStatsTransformer: Index(['radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate',
       'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate',
       'dire_avg_hero_pickrate', 'dire_avg_hero_winrate',
       'dire_avg_hero_synergy'],
      dtype='object')
2025-05-14 14:47:49,596 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
       radiant_avg_vs_enemy_winrate  radiant_avg_hero_pickrate  radiant_avg_hero_synergy  radiant_avg_hero_winrate  dire_avg_hero_pickrate  dire_avg_hero_winrate  dire_avg_hero_synergy
26464                      0.494257                   0.095919                  0.467542                  0.501626                0.090274               0.493875               0.487547
26465                      0.497980                   0.154686                  0.530732                  0.512624                0.124494               0.509176               0.512544
26466                      0.499735                   0.117375                  0.512925                  0.499049                0.093848               0.501402               0.467494
26467                      0.525664                   0.087016                  0.538978                  0.516470                0.155902               0.510908               0.516817
26469                      0.506704                   0.149615                  0.508394                  0.499516                0.065931               0.500730               0.490999
2025-05-14 14:47:49,596 - src.experiments.src.core.factory - INFO - Applying transformer: PlayerStatsTransformer
2025-05-14 14:47:49,596 - src.experiments.src.transformers.player_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:47:50,383 - src.experiments.src.transformers.player_stats_transformer - INFO - Added 28 player statistics features
2025-05-14 14:47:50,384 - src.experiments.src.core.factory - INFO - Result df shape: (365, 28)
2025-05-14 14:47:50,384 - src.experiments.src.core.factory - INFO - Added features by PlayerStatsTransformer: Index(['radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists',
       'radiant_avg_last_hits', 'radiant_avg_denies',
       'radiant_avg_hero_damage', 'radiant_avg_hero_healing',
       'radiant_avg_role_match', 'radiant_avg_behavior',
       'radiant_avg_account_level', 'radiant_avg_dota_plus',
       'radiant_avg_smurf_flag', 'radiant_avg_time_since_last',
       'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths',
       'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies',
       'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match',
       'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus',
       'dire_avg_smurf_flag', 'dire_avg_time_since_last',
       'dire_avg_matches_played'],
      dtype='object')
2025-05-14 14:47:50,394 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
       radiant_avg_kills  radiant_avg_deaths  radiant_avg_assists  radiant_avg_last_hits  radiant_avg_denies  radiant_avg_hero_damage  ...  dire_avg_behavior  dire_avg_account_level  dire_avg_dota_plus  dire_avg_smurf_flag  dire_avg_time_since_last  dire_avg_matches_played
26464          12.500000            3.500000            12.000000             232.000000           11.000000             27587.500000  ...                0.0                   169.0                 1.0                  0.0              1.218880e+06                      1.0
26465           5.777778            5.666667            18.333333             250.000000           15.888889             32723.333333  ...                0.0                   109.0                 0.0                  0.0              1.299803e+06                      3.0
26466           6.416667           10.541667            13.750000             245.125000            4.125000             29293.125000  ...                0.0                    99.6                 0.2                  0.0              1.322864e+05                      4.6
26467           3.000000            5.750000            15.500000             241.125000           10.125000             18432.875000  ...                0.0                     1.0                 1.0                  0.0              3.256250e+05                      1.0
26469           5.690909            7.057576            12.524242             188.387879           11.965152             21299.184091  ...                0.0                     0.0                 0.0                  0.0              0.000000e+00                      0.0

[5 rows x 28 columns]
2025-05-14 14:47:50,395 - src.experiments.src.core.factory - INFO - Final DataFrame columns: ['actualRank', 'radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate', 'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate', 'dire_avg_hero_pickrate', 'dire_avg_hero_winrate', 'dire_avg_hero_synergy', 'radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists', 'radiant_avg_last_hits', 'radiant_avg_denies', 'radiant_avg_hero_damage', 'radiant_avg_hero_healing', 'radiant_avg_role_match', 'radiant_avg_behavior', 'radiant_avg_account_level', 'radiant_avg_dota_plus', 'radiant_avg_smurf_flag', 'radiant_avg_time_since_last', 'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths', 'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies', 'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match', 'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus', 'dire_avg_smurf_flag', 'dire_avg_time_since_last', 'dire_avg_matches_played']
2025-05-14 14:47:50,395 - src.experiments.src.core.model_trainer - INFO - Using parameter grid search: False
2025-05-14 14:47:50,395 - src.experiments.src.core.model_trainer - INFO - Using SHAP: True
2025-05-14 14:47:50,395 - src.experiments.src.core.model_trainer - INFO - Using feature scaling: False
2025-05-14 14:47:50,401 - src.experiments.src.core.model_trainer - INFO - 
Training and evaluating models...
2025-05-14 14:47:50,401 - src.experiments.src.core.model_trainer - INFO - 
Training LogisticRegression...
2025-05-14 14:47:51,511 - src.experiments.src.core.model_trainer - INFO - 
LogisticRegression metrics:
2025-05-14 14:47:51,511 - src.experiments.src.core.model_trainer - INFO - auc_roc: 0.4856
2025-05-14 14:47:51,511 - src.experiments.src.core.model_trainer - INFO - f1: 0.5553
2025-05-14 14:47:51,511 - src.experiments.src.core.model_trainer - INFO - precision: 0.5433
2025-05-14 14:47:51,512 - src.experiments.src.core.model_trainer - INFO - recall: 0.5678
2025-05-14 14:47:51,512 - src.experiments.src.core.model_trainer - INFO - accuracy: 0.5041
2025-05-14 14:47:51,512 - src.experiments.src.core.model_trainer - INFO - log_loss: 0.9978
2025-05-14 14:47:51,512 - src.experiments.src.core.model_trainer - INFO - brier_score: 0.3296
2025-05-14 14:47:51,512 - src.experiments.src.core.model_trainer - INFO - 
New best model: LogisticRegression (AUC-ROC: 0.4856)
2025-05-14 14:47:51,512 - src.experiments.src.utils.feature_importance - INFO - 
Analyzing feature importance for LogisticRegression
2025-05-14 14:48:00,600 - src.experiments.src.utils.feature_importance - INFO - Saved feature importance statistics for LogisticRegression
2025-05-14 14:48:00,600 - src.experiments.src.core.model_trainer - INFO - 
Training RandomForest...
2025-05-14 14:48:12,153 - src.experiments.src.core.model_trainer - INFO - 
RandomForest metrics:
2025-05-14 14:48:12,154 - src.experiments.src.core.model_trainer - INFO - auc_roc: 0.5302
2025-05-14 14:48:12,154 - src.experiments.src.core.model_trainer - INFO - f1: 0.5792
2025-05-14 14:48:12,154 - src.experiments.src.core.model_trainer - INFO - precision: 0.5707
2025-05-14 14:48:12,154 - src.experiments.src.core.model_trainer - INFO - recall: 0.5879
2025-05-14 14:48:12,154 - src.experiments.src.core.model_trainer - INFO - accuracy: 0.5342
2025-05-14 14:48:12,154 - src.experiments.src.core.model_trainer - INFO - log_loss: 0.8130
2025-05-14 14:48:12,154 - src.experiments.src.core.model_trainer - INFO - brier_score: 0.2891
2025-05-14 14:48:12,154 - src.experiments.src.core.model_trainer - INFO - 
New best model: RandomForest (AUC-ROC: 0.5302)
2025-05-14 14:48:12,154 - src.experiments.src.utils.feature_importance - INFO - 
Analyzing feature importance for RandomForest
2025-05-14 14:48:57,982 - src.experiments.src.utils.feature_importance - INFO - Saved feature importance statistics for RandomForest
2025-05-14 14:48:57,982 - src.experiments.src.core.model_trainer - INFO - 
Training CatBoost...
2025-05-14 14:48:58,251 - src.experiments.src.core.model_trainer - INFO - 
CatBoost metrics:
2025-05-14 14:48:58,251 - src.experiments.src.core.model_trainer - INFO - auc_roc: 0.5332
2025-05-14 14:48:58,251 - src.experiments.src.core.model_trainer - INFO - f1: 0.5980
2025-05-14 14:48:58,251 - src.experiments.src.core.model_trainer - INFO - precision: 0.5837
2025-05-14 14:48:58,251 - src.experiments.src.core.model_trainer - INFO - recall: 0.6131
2025-05-14 14:48:58,252 - src.experiments.src.core.model_trainer - INFO - accuracy: 0.5507
2025-05-14 14:48:58,252 - src.experiments.src.core.model_trainer - INFO - log_loss: 0.6899
2025-05-14 14:48:58,252 - src.experiments.src.core.model_trainer - INFO - brier_score: 0.2484
2025-05-14 14:48:58,252 - src.experiments.src.core.model_trainer - INFO - 
New best model: CatBoost (AUC-ROC: 0.5332)
2025-05-14 14:48:58,252 - src.experiments.src.utils.feature_importance - INFO - 
Analyzing feature importance for CatBoost
2025-05-14 14:48:58,544 - src.experiments.src.utils.feature_importance - INFO - Saved feature importance statistics for CatBoost
2025-05-14 14:48:58,546 - src.experiments.src.utils.metrics - INFO - Saved model comparison to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_2/model_comparison.csv
2025-05-14 14:48:58,546 - src.experiments.src.utils.metrics - INFO - Saved model comparison to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_2/model_comparison.json
2025-05-14 14:48:58,546 - src.experiments.src.utils.metrics - INFO - 
Model comparison:
2025-05-14 14:48:58,549 - src.experiments.src.utils.metrics - INFO - 
                     auc_roc        f1  precision    recall  accuracy  log_loss  brier_score
LogisticRegression  0.485560  0.555283   0.543269  0.567839  0.504110  0.997829     0.329648
RandomForest        0.530211  0.579208   0.570732  0.587940  0.534247  0.813007     0.289119
CatBoost            0.533193  0.598039   0.583732  0.613065  0.550685  0.689887     0.248375
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - 
LogisticRegression optimal threshold analysis:
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - Optimal F1 threshold: 0.000
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - Metrics at optimal F1 threshold:
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.706
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - Precision: 0.545
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - Recall: 1.000
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.545
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.330
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - 
Optimal Accuracy threshold: 0.131
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - Metrics at optimal Accuracy threshold:
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.697
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - Precision: 0.557
2025-05-14 14:48:58,961 - src.experiments.src.utils.metrics - INFO - Recall: 0.930
2025-05-14 14:48:58,962 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.559
2025-05-14 14:48:58,962 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.330
2025-05-14 14:48:59,418 - src.experiments.src.utils.metrics - INFO - 
RandomForest optimal threshold analysis:
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - Optimal F1 threshold: 0.000
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - Metrics at optimal F1 threshold:
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.706
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - Precision: 0.545
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - Recall: 1.000
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.545
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.289
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - 
Optimal Accuracy threshold: 0.283
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - Metrics at optimal Accuracy threshold:
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.680
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - Precision: 0.560
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - Recall: 0.864
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.556
2025-05-14 14:48:59,419 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.289
2025-05-14 14:48:59,845 - src.experiments.src.utils.metrics - INFO - 
CatBoost optimal threshold analysis:
2025-05-14 14:48:59,845 - src.experiments.src.utils.metrics - INFO - Optimal F1 threshold: 0.444
2025-05-14 14:48:59,845 - src.experiments.src.utils.metrics - INFO - Metrics at optimal F1 threshold:
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.711
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - Precision: 0.551
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - Recall: 1.000
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.556
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.248
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - 
Optimal Accuracy threshold: 0.455
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - Metrics at optimal Accuracy threshold:
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.709
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - Precision: 0.554
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - Recall: 0.985
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.559
2025-05-14 14:48:59,846 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.248
2025-05-14 14:48:59,847 - src.experiments.src.core.model_trainer - INFO - Saved LogisticRegression model to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_2/checkpoints/window_2_logisticregression.joblib
2025-05-14 14:48:59,878 - src.experiments.src.core.model_trainer - INFO - Saved RandomForest model to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_2/checkpoints/window_2_randomforest.joblib
2025-05-14 14:48:59,883 - src.experiments.src.core.model_trainer - INFO - Saved CatBoost model to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_2/checkpoints/window_2_catboost.cbm
2025-05-14 14:48:59,884 - src.experiments.src.core.model_trainer - INFO - Saved best model (CatBoost) to production at /Users/ankamenskiy/SmartDota/models/catboost/window_2.cbm
2025-05-14 14:48:59,884 - root - INFO - 
Processing window 3/3
2025-05-14 14:48:59,885 - src.experiments.src.core.factory - INFO - Fitting pipeline on DataFrame with shape: (26241, 19)
2025-05-14 14:48:59,885 - src.experiments.src.core.factory - INFO - Fitting transformer: StarzDatasetConverter
2025-05-14 14:48:59,901 - src.experiments.src.core.factory - INFO - Fitting transformer: HeroStatsTransformer
2025-05-14 14:48:59,905 - src.experiments.src.transformers.hero_stats_transformer - INFO - Loading heroes from: /Users/ankamenskiy/SmartDota/data/hero_stats.json
2025-05-14 14:48:59,908 - src.experiments.src.transformers.hero_stats_transformer - INFO - Loaded hero data from /Users/ankamenskiy/SmartDota/data/hero_stats.json
2025-05-14 14:48:59,908 - src.experiments.src.transformers.hero_stats_transformer - INFO - Number of heroes: 126
2025-05-14 14:48:59,908 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero statistics from match data...
2025-05-14 14:49:00,975 - src.experiments.src.transformers.hero_stats_transformer - INFO - Finished calculating hero statistics
2025-05-14 14:49:00,980 - src.experiments.src.core.factory - INFO - Fitting transformer: PlayerStatsTransformer
2025-05-14 14:49:00,983 - src.experiments.src.transformers.player_stats_transformer - INFO - Calculating player statistics from match data...
2025-05-14 14:49:04,124 - src.experiments.src.transformers.player_stats_transformer - INFO - Finished calculating player statistics
2025-05-14 14:49:04,129 - src.experiments.src.core.factory - INFO - Pipeline fitting completed
2025-05-14 14:49:04,132 - src.experiments.src.core.base - INFO - Saving transformer StarzDatasetConverter state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/StarzDatasetConverter.pkl
2025-05-14 14:49:04,132 - src.experiments.src.core.base - INFO - Successfully saved transformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/StarzDatasetConverter.pkl
2025-05-14 14:49:04,132 - src.experiments.src.core.factory - INFO - Saved transformer StarzDatasetConverter to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/StarzDatasetConverter.pkl
2025-05-14 14:49:04,132 - src.experiments.src.core.base - INFO - Saving transformer HeroStatsTransformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/HeroStatsTransformer.pkl
2025-05-14 14:49:04,141 - src.experiments.src.core.base - INFO - Successfully saved transformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/HeroStatsTransformer.pkl
2025-05-14 14:49:04,142 - src.experiments.src.core.factory - INFO - Saved transformer HeroStatsTransformer to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/HeroStatsTransformer.pkl
2025-05-14 14:49:04,142 - src.experiments.src.core.base - INFO - Saving transformer PlayerStatsTransformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/PlayerStatsTransformer.pkl
2025-05-14 14:49:04,513 - src.experiments.src.core.base - INFO - Successfully saved transformer state to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/PlayerStatsTransformer.pkl
2025-05-14 14:49:04,534 - src.experiments.src.core.factory - INFO - Saved transformer PlayerStatsTransformer to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/pipeline/PlayerStatsTransformer.pkl
2025-05-14 14:49:04,534 - src.experiments.src.core.factory - INFO - Transforming DataFrame with shape: (26241, 19)
2025-05-14 14:49:04,534 - src.experiments.src.core.factory - INFO - Applying transformer: StarzDatasetConverter
2025-05-14 14:49:04,537 - src.experiments.src.transformers.starz_dataset_converter - INFO - Columns: match_id, radiant_win, start_time, end_time, actualRank, rank, radiant_team, dire_team, radiant_1, radiant_2, radiant_3, radiant_4, radiant_5, dire_1, dire_2, dire_3, dire_4, dire_5, pd_start_time
2025-05-14 14:49:04,540 - src.experiments.src.core.factory - INFO - Result df shape: (26241, 1)
2025-05-14 14:49:04,540 - src.experiments.src.core.factory - INFO - Added features by StarzDatasetConverter: Index(['actualRank'], dtype='object')
2025-05-14 14:49:04,541 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
   actualRank
0          62
1          62
2          71
3          72
4          54
2025-05-14 14:49:04,541 - src.experiments.src.core.factory - INFO - Applying transformer: HeroStatsTransformer
2025-05-14 14:49:04,544 - src.experiments.src.transformers.hero_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:49:04,544 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero winrates within team...
2025-05-14 14:49:04,993 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero with hero winrates within team...
2025-05-14 14:49:05,914 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero versus hero winrates...
2025-05-14 14:49:06,361 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero pickrates within team...
2025-05-14 14:49:06,895 - src.experiments.src.transformers.hero_stats_transformer - INFO - Added 7 hero statistics features
2025-05-14 14:49:06,898 - src.experiments.src.core.factory - INFO - Result df shape: (26241, 7)
2025-05-14 14:49:06,898 - src.experiments.src.core.factory - INFO - Added features by HeroStatsTransformer: Index(['radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate',
       'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate',
       'dire_avg_hero_pickrate', 'dire_avg_hero_winrate',
       'dire_avg_hero_synergy'],
      dtype='object')
2025-05-14 14:49:06,901 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
   radiant_avg_vs_enemy_winrate  radiant_avg_hero_pickrate  radiant_avg_hero_synergy  radiant_avg_hero_winrate  dire_avg_hero_pickrate  dire_avg_hero_winrate  dire_avg_hero_synergy
0                      0.501403                   0.092855                  0.501708                  0.510762                0.090774               0.514409               0.527096
1                      0.503080                   0.105674                  0.505999                  0.492906                0.148043               0.504579               0.502845
2                      0.498691                   0.100918                  0.468018                  0.483372                0.114775               0.491288               0.489761
3                      0.525552                   0.108151                  0.534117                  0.511407                0.072855               0.507889               0.495395
4                      0.502614                   0.135963                  0.511633                  0.504558                0.091993               0.496564               0.482956
2025-05-14 14:49:06,901 - src.experiments.src.core.factory - INFO - Applying transformer: PlayerStatsTransformer
2025-05-14 14:49:06,905 - src.experiments.src.transformers.player_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:50:00,381 - src.experiments.src.transformers.player_stats_transformer - INFO - Added 28 player statistics features
2025-05-14 14:50:00,388 - src.experiments.src.core.factory - INFO - Result df shape: (26241, 28)
2025-05-14 14:50:00,388 - src.experiments.src.core.factory - INFO - Added features by PlayerStatsTransformer: Index(['radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists',
       'radiant_avg_last_hits', 'radiant_avg_denies',
       'radiant_avg_hero_damage', 'radiant_avg_hero_healing',
       'radiant_avg_role_match', 'radiant_avg_behavior',
       'radiant_avg_account_level', 'radiant_avg_dota_plus',
       'radiant_avg_smurf_flag', 'radiant_avg_time_since_last',
       'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths',
       'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies',
       'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match',
       'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus',
       'dire_avg_smurf_flag', 'dire_avg_time_since_last',
       'dire_avg_matches_played'],
      dtype='object')
2025-05-14 14:50:00,399 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
   radiant_avg_kills  radiant_avg_deaths  radiant_avg_assists  radiant_avg_last_hits  radiant_avg_denies  radiant_avg_hero_damage  radiant_avg_hero_healing  ...  dire_avg_role_match  dire_avg_behavior  dire_avg_account_level  dire_avg_dota_plus  dire_avg_smurf_flag  dire_avg_time_since_last  dire_avg_matches_played
0           8.822222            8.716667            15.988889             225.463889            8.097222             30319.183333               2551.772222  ...             0.810606           0.000000                    80.0                 0.4                  0.0                -1255034.2                      6.0
1           8.766667            6.200000            14.766667             154.733333           10.166667             21074.366667                657.533333  ...             0.700000           0.000000                    47.6                 0.2                  0.0                 -342750.0                      1.4
2          11.600000           11.000000            23.000000             308.600000            5.600000             37513.000000                  0.000000  ...             0.844444           0.010526                    85.6                 0.0                  0.0                -2433459.2                     10.4
3           7.757143            8.723810            16.047619             262.597619            7.680952             30677.454762               1900.583333  ...             0.704365           0.000000                   165.8                 1.0                  0.0                -2246007.6                     13.2
4          10.800000            9.400000            22.900000             189.500000            5.500000             36460.100000                728.200000  ...             0.800000           0.000000                    41.8                 0.6                  0.0                 -705874.2                      1.6

[5 rows x 28 columns]
2025-05-14 14:50:00,402 - src.experiments.src.core.factory - INFO - Final DataFrame columns: ['actualRank', 'radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate', 'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate', 'dire_avg_hero_pickrate', 'dire_avg_hero_winrate', 'dire_avg_hero_synergy', 'radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists', 'radiant_avg_last_hits', 'radiant_avg_denies', 'radiant_avg_hero_damage', 'radiant_avg_hero_healing', 'radiant_avg_role_match', 'radiant_avg_behavior', 'radiant_avg_account_level', 'radiant_avg_dota_plus', 'radiant_avg_smurf_flag', 'radiant_avg_time_since_last', 'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths', 'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies', 'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match', 'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus', 'dire_avg_smurf_flag', 'dire_avg_time_since_last', 'dire_avg_matches_played']
2025-05-14 14:50:00,403 - src.experiments.src.core.factory - INFO - Transforming DataFrame with shape: (223, 19)
2025-05-14 14:50:00,403 - src.experiments.src.core.factory - INFO - Applying transformer: StarzDatasetConverter
2025-05-14 14:50:00,403 - src.experiments.src.transformers.starz_dataset_converter - INFO - Columns: match_id, radiant_win, start_time, end_time, actualRank, rank, radiant_team, dire_team, radiant_1, radiant_2, radiant_3, radiant_4, radiant_5, dire_1, dire_2, dire_3, dire_4, dire_5, pd_start_time
2025-05-14 14:50:00,404 - src.experiments.src.core.factory - INFO - Result df shape: (223, 1)
2025-05-14 14:50:00,404 - src.experiments.src.core.factory - INFO - Added features by StarzDatasetConverter: Index(['actualRank'], dtype='object')
2025-05-14 14:50:00,405 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
       actualRank
26241          54
26242          63
26243          71
26244          71
26245          52
2025-05-14 14:50:00,405 - src.experiments.src.core.factory - INFO - Applying transformer: HeroStatsTransformer
2025-05-14 14:50:00,405 - src.experiments.src.transformers.hero_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:50:00,405 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero winrates within team...
2025-05-14 14:50:00,410 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero with hero winrates within team...
2025-05-14 14:50:00,418 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero versus hero winrates...
2025-05-14 14:50:00,423 - src.experiments.src.transformers.hero_stats_transformer - INFO - Calculating hero pickrates within team...
2025-05-14 14:50:00,428 - src.experiments.src.transformers.hero_stats_transformer - INFO - Added 7 hero statistics features
2025-05-14 14:50:00,428 - src.experiments.src.core.factory - INFO - Result df shape: (223, 7)
2025-05-14 14:50:00,428 - src.experiments.src.core.factory - INFO - Added features by HeroStatsTransformer: Index(['radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate',
       'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate',
       'dire_avg_hero_pickrate', 'dire_avg_hero_winrate',
       'dire_avg_hero_synergy'],
      dtype='object')
2025-05-14 14:50:00,431 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
       radiant_avg_vs_enemy_winrate  radiant_avg_hero_pickrate  radiant_avg_hero_synergy  radiant_avg_hero_winrate  dire_avg_hero_pickrate  dire_avg_hero_winrate  dire_avg_hero_synergy
26241                      0.501947                   0.091414                  0.482299                  0.484459                0.067574               0.491214               0.478248
26242                      0.495977                   0.131748                  0.495480                  0.491630                0.138165               0.491509               0.481707
26243                      0.508216                   0.117808                  0.505446                  0.503562                0.134461               0.494850               0.482980
26244                      0.487820                   0.121428                  0.509405                  0.500927                0.135163               0.505158               0.527647
26245                      0.459423                   0.079669                  0.497613                  0.497176                0.132647               0.522843               0.547356
2025-05-14 14:50:00,432 - src.experiments.src.core.factory - INFO - Applying transformer: PlayerStatsTransformer
2025-05-14 14:50:00,432 - src.experiments.src.transformers.player_stats_transformer - INFO - Starting feature transformation...
2025-05-14 14:50:00,941 - src.experiments.src.transformers.player_stats_transformer - INFO - Added 28 player statistics features
2025-05-14 14:50:00,941 - src.experiments.src.core.factory - INFO - Result df shape: (223, 28)
2025-05-14 14:50:00,941 - src.experiments.src.core.factory - INFO - Added features by PlayerStatsTransformer: Index(['radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists',
       'radiant_avg_last_hits', 'radiant_avg_denies',
       'radiant_avg_hero_damage', 'radiant_avg_hero_healing',
       'radiant_avg_role_match', 'radiant_avg_behavior',
       'radiant_avg_account_level', 'radiant_avg_dota_plus',
       'radiant_avg_smurf_flag', 'radiant_avg_time_since_last',
       'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths',
       'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies',
       'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match',
       'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus',
       'dire_avg_smurf_flag', 'dire_avg_time_since_last',
       'dire_avg_matches_played'],
      dtype='object')
2025-05-14 14:50:00,951 - src.experiments.src.core.factory - INFO - First few rows of transformed data:
       radiant_avg_kills  radiant_avg_deaths  radiant_avg_assists  radiant_avg_last_hits  radiant_avg_denies  radiant_avg_hero_damage  ...  dire_avg_behavior  dire_avg_account_level  dire_avg_dota_plus  dire_avg_smurf_flag  dire_avg_time_since_last  dire_avg_matches_played
26241           7.727273            6.636364            15.636364             146.454545            8.454545             21634.818182  ...                0.0                    69.5                 0.5                  0.0                  206686.5                      6.0
26242           7.678571            6.985714            15.960714             270.214286           11.046429             28993.425000  ...                0.0                   143.0                 0.4                  0.0                   39490.0                      5.2
26243           6.902778            6.991270            15.458333             194.936905            7.888095             25498.586111  ...                0.0                   163.2                 0.4                  0.0                  298672.8                      5.4
26244           8.362500            6.679167            16.245833             204.679167            8.679167             23752.095833  ...                0.0                    79.0                 0.4                  0.0                  234761.4                      8.6
26245          12.250000            6.750000            19.375000             239.000000            4.750000             35736.500000  ...                0.0                   144.0                 0.0                  0.0                   18619.0                      1.0

[5 rows x 28 columns]
2025-05-14 14:50:00,952 - src.experiments.src.core.factory - INFO - Final DataFrame columns: ['actualRank', 'radiant_avg_vs_enemy_winrate', 'radiant_avg_hero_pickrate', 'radiant_avg_hero_synergy', 'radiant_avg_hero_winrate', 'dire_avg_hero_pickrate', 'dire_avg_hero_winrate', 'dire_avg_hero_synergy', 'radiant_avg_kills', 'radiant_avg_deaths', 'radiant_avg_assists', 'radiant_avg_last_hits', 'radiant_avg_denies', 'radiant_avg_hero_damage', 'radiant_avg_hero_healing', 'radiant_avg_role_match', 'radiant_avg_behavior', 'radiant_avg_account_level', 'radiant_avg_dota_plus', 'radiant_avg_smurf_flag', 'radiant_avg_time_since_last', 'radiant_avg_matches_played', 'dire_avg_kills', 'dire_avg_deaths', 'dire_avg_assists', 'dire_avg_last_hits', 'dire_avg_denies', 'dire_avg_hero_damage', 'dire_avg_hero_healing', 'dire_avg_role_match', 'dire_avg_behavior', 'dire_avg_account_level', 'dire_avg_dota_plus', 'dire_avg_smurf_flag', 'dire_avg_time_since_last', 'dire_avg_matches_played']
2025-05-14 14:50:00,952 - src.experiments.src.core.model_trainer - INFO - Using parameter grid search: False
2025-05-14 14:50:00,952 - src.experiments.src.core.model_trainer - INFO - Using SHAP: True
2025-05-14 14:50:00,952 - src.experiments.src.core.model_trainer - INFO - Using feature scaling: False
2025-05-14 14:50:00,955 - src.experiments.src.core.model_trainer - INFO - 
Training and evaluating models...
2025-05-14 14:50:00,955 - src.experiments.src.core.model_trainer - INFO - 
Training LogisticRegression...
2025-05-14 14:50:02,153 - src.experiments.src.core.model_trainer - INFO - 
LogisticRegression metrics:
2025-05-14 14:50:02,153 - src.experiments.src.core.model_trainer - INFO - auc_roc: 0.5383
2025-05-14 14:50:02,153 - src.experiments.src.core.model_trainer - INFO - f1: 0.5873
2025-05-14 14:50:02,153 - src.experiments.src.core.model_trainer - INFO - precision: 0.5873
2025-05-14 14:50:02,153 - src.experiments.src.core.model_trainer - INFO - recall: 0.5873
2025-05-14 14:50:02,153 - src.experiments.src.core.model_trainer - INFO - accuracy: 0.5336
2025-05-14 14:50:02,153 - src.experiments.src.core.model_trainer - INFO - log_loss: 0.8877
2025-05-14 14:50:02,153 - src.experiments.src.core.model_trainer - INFO - brier_score: 0.3002
2025-05-14 14:50:02,153 - src.experiments.src.core.model_trainer - INFO - 
New best model: LogisticRegression (AUC-ROC: 0.5383)
2025-05-14 14:50:02,153 - src.experiments.src.utils.feature_importance - INFO - 
Analyzing feature importance for LogisticRegression
2025-05-14 14:50:07,946 - src.experiments.src.utils.feature_importance - INFO - Saved feature importance statistics for LogisticRegression
2025-05-14 14:50:07,946 - src.experiments.src.core.model_trainer - INFO - 
Training RandomForest...
2025-05-14 14:50:19,053 - src.experiments.src.core.model_trainer - INFO - 
RandomForest metrics:
2025-05-14 14:50:19,054 - src.experiments.src.core.model_trainer - INFO - auc_roc: 0.5797
2025-05-14 14:50:19,054 - src.experiments.src.core.model_trainer - INFO - f1: 0.5887
2025-05-14 14:50:19,054 - src.experiments.src.core.model_trainer - INFO - precision: 0.5984
2025-05-14 14:50:19,054 - src.experiments.src.core.model_trainer - INFO - recall: 0.5794
2025-05-14 14:50:19,054 - src.experiments.src.core.model_trainer - INFO - accuracy: 0.5426
2025-05-14 14:50:19,054 - src.experiments.src.core.model_trainer - INFO - log_loss: 0.8810
2025-05-14 14:50:19,054 - src.experiments.src.core.model_trainer - INFO - brier_score: 0.2611
2025-05-14 14:50:19,054 - src.experiments.src.core.model_trainer - INFO - 
New best model: RandomForest (AUC-ROC: 0.5797)
2025-05-14 14:50:19,054 - src.experiments.src.utils.feature_importance - INFO - 
Analyzing feature importance for RandomForest
2025-05-14 14:50:46,768 - src.experiments.src.utils.feature_importance - INFO - Saved feature importance statistics for RandomForest
2025-05-14 14:50:46,768 - src.experiments.src.core.model_trainer - INFO - 
Training CatBoost...
2025-05-14 14:50:47,025 - src.experiments.src.core.model_trainer - INFO - 
CatBoost metrics:
2025-05-14 14:50:47,025 - src.experiments.src.core.model_trainer - INFO - auc_roc: 0.5722
2025-05-14 14:50:47,026 - src.experiments.src.core.model_trainer - INFO - f1: 0.5421
2025-05-14 14:50:47,026 - src.experiments.src.core.model_trainer - INFO - precision: 0.6591
2025-05-14 14:50:47,026 - src.experiments.src.core.model_trainer - INFO - recall: 0.4603
2025-05-14 14:50:47,026 - src.experiments.src.core.model_trainer - INFO - accuracy: 0.5605
2025-05-14 14:50:47,026 - src.experiments.src.core.model_trainer - INFO - log_loss: 0.6913
2025-05-14 14:50:47,026 - src.experiments.src.core.model_trainer - INFO - brier_score: 0.2491
2025-05-14 14:50:47,026 - src.experiments.src.utils.feature_importance - INFO - 
Analyzing feature importance for CatBoost
2025-05-14 14:50:47,310 - src.experiments.src.utils.feature_importance - INFO - Saved feature importance statistics for CatBoost
2025-05-14 14:50:47,311 - src.experiments.src.utils.metrics - INFO - Saved model comparison to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_3/model_comparison.csv
2025-05-14 14:50:47,311 - src.experiments.src.utils.metrics - INFO - Saved model comparison to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_3/model_comparison.json
2025-05-14 14:50:47,311 - src.experiments.src.utils.metrics - INFO - 
Model comparison:
2025-05-14 14:50:47,314 - src.experiments.src.utils.metrics - INFO - 
                     auc_roc        f1  precision    recall  accuracy  log_loss  brier_score
LogisticRegression  0.538292  0.587302   0.587302  0.587302  0.533632  0.887655     0.300221
RandomForest        0.579651  0.588710   0.598361  0.579365  0.542601  0.881021     0.261087
CatBoost            0.572247  0.542056   0.659091  0.460317  0.560538  0.691252     0.249053
2025-05-14 14:50:47,722 - src.experiments.src.utils.metrics - INFO - 
LogisticRegression optimal threshold analysis:
2025-05-14 14:50:47,722 - src.experiments.src.utils.metrics - INFO - Optimal F1 threshold: 0.040
2025-05-14 14:50:47,722 - src.experiments.src.utils.metrics - INFO - Metrics at optimal F1 threshold:
2025-05-14 14:50:47,722 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.723
2025-05-14 14:50:47,722 - src.experiments.src.utils.metrics - INFO - Precision: 0.568
2025-05-14 14:50:47,722 - src.experiments.src.utils.metrics - INFO - Recall: 0.992
2025-05-14 14:50:47,722 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.570
2025-05-14 14:50:47,723 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.300
2025-05-14 14:50:47,723 - src.experiments.src.utils.metrics - INFO - 
Optimal Accuracy threshold: 0.081
2025-05-14 14:50:47,723 - src.experiments.src.utils.metrics - INFO - Metrics at optimal Accuracy threshold:
2025-05-14 14:50:47,723 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.716
2025-05-14 14:50:47,723 - src.experiments.src.utils.metrics - INFO - Precision: 0.574
2025-05-14 14:50:47,723 - src.experiments.src.utils.metrics - INFO - Recall: 0.952
2025-05-14 14:50:47,723 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.574
2025-05-14 14:50:47,723 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.300
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - 
RandomForest optimal threshold analysis:
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - Optimal F1 threshold: 0.000
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - Metrics at optimal F1 threshold:
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.722
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - Precision: 0.565
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - Recall: 1.000
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.565
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.261
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - 
Optimal Accuracy threshold: 0.374
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - Metrics at optimal Accuracy threshold:
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.705
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - Precision: 0.615
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - Recall: 0.825
2025-05-14 14:50:48,153 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.610
2025-05-14 14:50:48,154 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.261
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - 
CatBoost optimal threshold analysis:
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - Optimal F1 threshold: 0.000
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - Metrics at optimal F1 threshold:
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.722
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - Precision: 0.565
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - Recall: 1.000
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.565
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.249
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - 
Optimal Accuracy threshold: 0.000
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - Metrics at optimal Accuracy threshold:
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - F1 Score: 0.722
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - Precision: 0.565
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - Recall: 1.000
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - Accuracy: 0.565
2025-05-14 14:50:48,556 - src.experiments.src.utils.metrics - INFO - Brier Score: 0.249
2025-05-14 14:50:48,557 - src.experiments.src.core.model_trainer - INFO - Saved LogisticRegression model to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_3/checkpoints/window_3_logisticregression.joblib
2025-05-14 14:50:48,591 - src.experiments.src.core.model_trainer - INFO - Saved RandomForest model to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_3/checkpoints/window_3_randomforest.joblib
2025-05-14 14:50:48,597 - src.experiments.src.core.model_trainer - INFO - Saved CatBoost model to /Users/ankamenskiy/SmartDota/src/experiments/runs/hero_ohe_3.78c_hero-stats_player-stats/2025.05.14-14.44.21/window_3/checkpoints/window_3_catboost.cbm
2025-05-14 14:50:48,636 - src.experiments.src.core.model_trainer - INFO - Saved best model (RandomForest) to production at /Users/ankamenskiy/SmartDota/models/sklearn/window_3.joblib
2025-05-14 14:50:48,637 - root - INFO - 
Aggregated metrics across all windows:
2025-05-14 14:50:48,637 - root - INFO - 
LogisticRegression:
2025-05-14 14:50:48,637 - root - INFO - auc_roc: 0.5057
2025-05-14 14:50:48,637 - root - INFO - f1: 0.5608
2025-05-14 14:50:48,637 - root - INFO - precision: 0.5597
2025-05-14 14:50:48,637 - root - INFO - recall: 0.5621
2025-05-14 14:50:48,637 - root - INFO - accuracy: 0.5121
2025-05-14 14:50:48,637 - root - INFO - log_loss: 0.9345
2025-05-14 14:50:48,637 - root - INFO - brier_score: 0.3126
2025-05-14 14:50:48,637 - root - INFO - 
RandomForest:
2025-05-14 14:50:48,637 - root - INFO - auc_roc: 0.5564
2025-05-14 14:50:48,637 - root - INFO - f1: 0.5886
2025-05-14 14:50:48,637 - root - INFO - precision: 0.5980
2025-05-14 14:50:48,637 - root - INFO - recall: 0.5801
2025-05-14 14:50:48,637 - root - INFO - accuracy: 0.5501
2025-05-14 14:50:48,637 - root - INFO - log_loss: 0.8198
2025-05-14 14:50:48,637 - root - INFO - brier_score: 0.2742
2025-05-14 14:50:48,637 - root - INFO - 
CatBoost:
2025-05-14 14:50:48,637 - root - INFO - auc_roc: 0.5703
2025-05-14 14:50:48,637 - root - INFO - f1: 0.5860
2025-05-14 14:50:48,637 - root - INFO - precision: 0.6290
2025-05-14 14:50:48,637 - root - INFO - recall: 0.5557
2025-05-14 14:50:48,637 - root - INFO - accuracy: 0.5683
2025-05-14 14:50:48,637 - root - INFO - log_loss: 0.6877
2025-05-14 14:50:48,637 - root - INFO - brier_score: 0.2473
2025-05-14 14:50:48,637 - root - INFO - Time-based CV experiment completed successfully
